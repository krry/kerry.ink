{
  "version": 3,
  "sources": ["../../../src/components/webring/webring.element.ts", "../../../src/components/webring/fetchWebringData.ts"],
  "sourcesContent": ["import { WebringData, WebringLink } from '../../types/webring';\nimport { fetchWebringData, validateWebringData } from './fetchWebringData';\n\n/**\n * Web Component wrapper for the webring widget\n * Usage: <webring-widget data-source=\"url\" mode=\"compact\" theme=\"auto\"></webring-widget>\n */\nclass WebringElement extends HTMLElement {\n  private shadow: ShadowRoot;\n  private data: WebringData | null = null;\n  private loading = false;\n\n  constructor() {\n    super();\n    this.shadow = this.attachShadow({ mode: 'open' });\n  }\n\n  /**\n   * Observed attributes that trigger attributeChangedCallback\n   */\n  static get observedAttributes(): string[] {\n    return ['data-source', 'mode', 'theme'];\n  }\n\n  /**\n   * Lifecycle: element is inserted into the DOM\n   */\n  async connectedCallback(): Promise<void> {\n    this.render();\n    await this.loadData();\n  }\n\n  /**\n   * Lifecycle: an observed attribute has changed\n   */\n  async attributeChangedCallback(name: string, _oldValue: string, _newValue: string): Promise<void> {\n    if (name === 'data-source') {\n      this.data = null;\n      await this.loadData();\n      this.render();\n    } else {\n      this.render();\n    }\n  }\n\n  /**\n   * Load data from data-source attribute\n   */\n  private async loadData(): Promise<void> {\n    if (this.loading) return;\n\n    const source = this.getAttribute('data-source');\n    if (!source) {\n      this.renderError('No data-source attribute provided');\n      return;\n    }\n\n    this.loading = true;\n    this.renderLoading();\n\n    try {\n      this.data = await fetchWebringData(source);\n      if (!validateWebringData(this.data)) {\n        this.renderError('Invalid webring data format');\n        return;\n      }\n      this.render();\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Failed to load webring data';\n      this.renderError(message);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  /**\n   * Main render method\n   */\n  private render(): void {\n    const mode = this.getAttribute('mode') || 'compact';\n    const theme = this.getAttribute('theme') || 'auto';\n\n    if (!this.data) {\n      return;\n    }\n\n    const html = `\n      <style>\n        :host {\n          --webring-text-color: #333;\n          --webring-bg-color: #fff;\n          --webring-link-color: #0066cc;\n          --webring-border-color: #ddd;\n        }\n\n        :host([theme=\"dark\"]) {\n          --webring-text-color: #eee;\n          --webring-bg-color: #222;\n          --webring-link-color: #66b3ff;\n          --webring-border-color: #444;\n        }\n\n        .webring {\n          color: var(--webring-text-color);\n          background: var(--webring-bg-color);\n          border: 1px solid var(--webring-border-color);\n          border-radius: 4px;\n          padding: 1rem;\n          font-family: system-ui, -apple-system, sans-serif;\n        }\n\n        .webring__title {\n          margin: 0 0 0.5rem 0;\n          font-size: 1.1em;\n          font-weight: 600;\n        }\n\n        .webring__links {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n\n        .webring__link-item {\n          margin: 0.5rem 0;\n        }\n\n        .webring__link {\n          color: var(--webring-link-color);\n          text-decoration: none;\n        }\n\n        .webring__link:hover {\n          text-decoration: underline;\n        }\n\n        .webring__description {\n          margin: 0.25rem 0 0 0;\n          font-size: 0.9em;\n          opacity: 0.7;\n        }\n      </style>\n\n      <div class=\"webring webring--${mode} webring--theme-${theme}\">\n        <h3 class=\"webring__title\">Webring</h3>\n        <ul class=\"webring__links\">\n          ${this.data.links\n            .map(\n              (link) => `\n            <li class=\"webring__link-item\">\n              <a href=\"${link.url}\" class=\"webring__link\" title=\"${link.description || link.name}\">\n                ${link.name}\n              </a>\n              ${\n                link.description && mode === 'full'\n                  ? `<p class=\"webring__description\">${link.description}</p>`\n                  : ''\n              }\n            </li>\n          `\n            )\n            .join('')}\n        </ul>\n      </div>\n    `;\n\n    this.shadow.innerHTML = html;\n  }\n\n  /**\n   * Render loading state\n   */\n  private renderLoading(): void {\n    this.shadow.innerHTML = '<div style=\"padding: 1rem; text-align: center;\">Loading webring...</div>';\n  }\n\n  /**\n   * Render error state\n   */\n  private renderError(message: string): void {\n    this.shadow.innerHTML = `<div style=\"padding: 1rem; color: #c33; background: #fdd; border: 1px solid #fbb; border-radius: 4px;\">Error: ${message}</div>`;\n  }\n}\n\n// Register the custom element\nif (!customElements.get('webring-widget')) {\n  customElements.define('webring-widget', WebringElement);\n}\n\nexport default WebringElement;\n", "import { WebringData } from '../../types/webring';\n\n/**\n * Fetch webring data from a URL or return inline data\n * @param source - URL string or inline WebringData object\n * @returns Promise<WebringData>\n */\nexport async function fetchWebringData(source: string | WebringData): Promise<WebringData> {\n  // If source is already an object, return it\n  if (typeof source === 'object' && source !== null) {\n    return source;\n  }\n\n  // If source is a URL string, fetch it\n  if (typeof source === 'string') {\n    const response = await fetch(source);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch webring data from ${source}: ${response.statusText}`);\n    }\n    return response.json() as Promise<WebringData>;\n  }\n\n  throw new Error('Invalid data source: must be a URL string or WebringData object');\n}\n\n/**\n * Validate webring data structure\n * @param data - WebringData to validate\n * @returns boolean\n */\nexport function validateWebringData(data: WebringData): boolean {\n  return (\n    typeof data === 'object' &&\n    typeof data.version === 'string' &&\n    Array.isArray(data.links) &&\n    data.links.every(\n      (link) => typeof link.name === 'string' && typeof link.url === 'string'\n    )\n  );\n}\n"],
  "mappings": "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",
  "names": ["webring_element_exports", "__export", "webring_element_default", "fetchWebringData", "source", "response", "validateWebringData", "data", "link", "WebringElement", "__publicField", "name", "_oldValue", "_newValue", "source", "fetchWebringData", "validateWebringData", "error", "message", "mode", "theme", "html", "link", "webring_element_default"]
}
