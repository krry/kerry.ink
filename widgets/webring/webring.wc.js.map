{
  "version": 3,
  "sources": ["../../../src/components/webring/fetchWebringData.ts", "../../../src/components/webring/webring.element.ts"],
  "sourcesContent": ["import { WebringData } from '../../types/webring';\n\n/**\n * Fetch webring data from a URL or return inline data\n * @param source - URL string or inline WebringData object\n * @returns Promise<WebringData>\n */\nexport async function fetchWebringData(source: string | WebringData): Promise<WebringData> {\n  // If source is already an object, return it\n  if (typeof source === 'object' && source !== null) {\n    return source;\n  }\n\n  // If source is a URL string, fetch it\n  if (typeof source === 'string') {\n    const response = await fetch(source);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch webring data from ${source}: ${response.statusText}`);\n    }\n    return response.json() as Promise<WebringData>;\n  }\n\n  throw new Error('Invalid data source: must be a URL string or WebringData object');\n}\n\n/**\n * Validate webring data structure\n * @param data - WebringData to validate\n * @returns boolean\n */\nexport function validateWebringData(data: WebringData): boolean {\n  return (\n    typeof data === 'object' &&\n    typeof data.version === 'string' &&\n    Array.isArray(data.links) &&\n    data.links.every(\n      (link) => typeof link.name === 'string' && typeof link.url === 'string'\n    )\n  );\n}\n", "import { WebringData } from '../../types/webring';\nimport { fetchWebringData, validateWebringData } from './fetchWebringData';\n\n/**\n * Web Component wrapper for the webring widget\n * Usage: <webring-widget data-source=\"url\" mode=\"compact\" theme=\"auto\"></webring-widget>\n */\nclass WebringElement extends HTMLElement {\n  private shadow: ShadowRoot;\n  private data: WebringData | null = null;\n  private loading = false;\n\n  constructor() {\n    super();\n    this.shadow = this.attachShadow({ mode: 'open' });\n  }\n\n  static get observedAttributes(): string[] {\n    return ['data-source', 'mode', 'theme'];\n  }\n\n  async connectedCallback(): Promise<void> {\n    await this.loadData();\n    // Re-render on system theme change\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {\n      if (this.getAttribute('theme') === 'auto') this.render();\n    });\n  }\n\n  async attributeChangedCallback(name: string): Promise<void> {\n    if (name === 'data-source') {\n      this.data = null;\n      await this.loadData();\n    } else {\n      this.render();\n    }\n  }\n\n  private async loadData(): Promise<void> {\n    if (this.loading) return;\n    const source = this.getAttribute('data-source');\n    if (!source) return;\n\n    this.loading = true;\n    try {\n      const data = await fetchWebringData(source);\n      if (validateWebringData(data)) {\n        this.data = data;\n        this.render();\n      }\n    } catch (e) {\n      console.error('Webring failed to load', e);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  private resolveTheme(): string {\n    const themeAttr = this.getAttribute('theme') || 'auto';\n    if (themeAttr === 'auto') {\n      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    }\n    return themeAttr;\n  }\n\n  private render(): void {\n    if (!this.data) return;\n\n    const theme = this.resolveTheme();\n    const isDark = theme === 'dark';\n\n    const style = `\n      <style>\n        @import url('https://fonts.googleapis.com/css2?family=Recursive:slnt,wght,CASL,MONO@-15..0,300..1000,0..1,0..1&display=swap');\n\n        :host {\n          display: block;\n          font-family: 'Recursive', system-ui, sans-serif;\n          --glass-bg: ${isDark ? 'rgba(20, 20, 20, 0.6)' : 'rgba(255, 255, 255, 0.6)'};\n          --glass-border: ${isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(255, 255, 255, 0.4)'};\n          --text: ${isDark ? '#e0e0e0' : '#1a1a1a'};\n          --text-muted: ${isDark ? '#a0a0a0' : '#666'};\n          --hover-bg: ${isDark ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)'};\n          --shadow: ${isDark ? '0 8px 32px rgba(0, 0, 0, 0.4)' : '0 8px 32px rgba(0, 0, 0, 0.1)'};\n        }\n\n        details {\n          background: var(--glass-bg);\n          backdrop-filter: blur(12px);\n          -webkit-backdrop-filter: blur(12px);\n          border: 1px solid var(--glass-border);\n          border-radius: 12px;\n          box-shadow: var(--shadow);\n          color: var(--text);\n          width: max-content;\n          transition: all 0.2s ease;\n          overflow: hidden;\n        }\n\n        details[open] {\n          width: 200px;\n        }\n\n        summary {\n          list-style: none;\n          cursor: pointer;\n          padding: 0.5rem 0.75rem;\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          font-weight: 500;\n          user-select: none;\n          outline: none;\n        }\n\n        summary::-webkit-details-marker {\n          display: none;\n        }\n\n        summary:hover {\n          background: var(--hover-bg);\n        }\n\n        /* Rotating caret */\n        summary::after {\n          content: '\u203A';\n          display: inline-block;\n          font-family: system-ui; /* Reliable arrow */\n          margin-left: auto;\n          transition: transform 0.2s ease;\n          font-size: 1.2em;\n          line-height: 1;\n        }\n\n        details[open] summary::after {\n          transform: rotate(90deg);\n        }\n\n        /* Title link */\n        .title-link {\n          color: inherit;\n          text-decoration: none;\n          font-weight: 800;\n          font-variation-settings: 'CASL' 1, 'MONO' 0;\n          margin-right: 0.25rem;\n        }\n        \n        .title-link:hover {\n          text-decoration: underline;\n          text-decoration-thickness: 2px;\n        }\n\n        ul {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n          border-top: 1px solid var(--glass-border);\n        }\n\n        li a {\n          display: block;\n          padding: 0.5rem 0.75rem;\n          color: var(--text);\n          text-decoration: none;\n          font-size: 0.9em;\n          transition: background 0.15s ease, padding-left 0.15s ease;\n        }\n\n        li a:hover {\n          background: var(--hover-bg);\n          padding-left: 1rem;\n          color: var(--text);\n        }\n      </style>\n    `;\n\n    const html = `\n      ${style}\n      <details>\n        <summary>\n          <a href=\"https://kerry.ink\" class=\"title-link\" target=\"_blank\">\uD83E\uDEE0\u2712\uFE0F</a>\n        </summary>\n        <ul>\n          ${this.data.links\n            .map(\n              (link) => `\n            <li>\n              <a href=\"${link.url}\" title=\"${link.description || ''}\" target=\"_blank\">\n                ${link.name}\n              </a>\n            </li>\n          `\n            )\n            .join('')}\n        </ul>\n      </details>\n    `;\n\n    this.shadow.innerHTML = html;\n  }\n}\n\nif (!customElements.get('webring-widget')) {\n  customElements.define('webring-widget', WebringElement);\n}\n"],
  "mappings": "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",
  "names": ["fetchWebringData", "source", "response", "validateWebringData", "data", "link", "WebringElement", "__publicField", "name", "source", "data", "fetchWebringData", "validateWebringData", "e", "themeAttr", "isDark", "html", "link"]
}
